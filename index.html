<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="jquery-turtle.js"></script>
    <link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/themes/sunny/jquery-ui.css">
</head>
<body>
<div class="container">
    <p>Turtle</p>
    <div class="row">
        <div class=" col col-lg-7 turt">
            <samp class="turtlefield">
                <samp id="field">
                    <canvas width="40" height="48" class="turtle" id="turtle" style="opacity: 0.67; width: 20px; height: 24px; display: table; transform: none; z-index: 1;">
                    </canvas>
                </samp>
            </samp>

        </div>

        <div class="col col-lg-2" id="commands" >
            <div class="ui-widget ui-corner-all ui-state-error my-draggable commands up" data-command="up">
                Поднять хвост.
            </div>
            <div class="ui-widget ui-corner-all ui-state-error my-draggable commands down" data-command="down">
                Опустить хвост.
            </div>
            <div class="ui-widget ui-corner-all ui-state-error my-draggable commands rotate" data-command="rotate">
                Повернуться на <input type="number" class="form-control"/> градусов.
            </div>
            <div class="ui-widget ui-corner-all ui-state-error my-draggable commands move" data-command="move">
                Двигаться на <input type="number" class="form-control"/> шагов.
            </div>
            <div class="ui-widget ui-corner-all ui-state-error my-draggable commands repeat" data-command="repeat">
                Повторить <input type="number" class="form-control"/> раз.
            </div>
            <div >
                <img class="icon play" src="img/play.png" style="width: 30px; height: 30px;"/>
                <img class="icon pause" src="img/pause.png"/>
                <img class="icon stop" src="img/stop.png"/>
            </div>
        </div>

        <div class="col col-lg-2" id="comandslist" style="width: 260px;">
            <div id="sortable">
                Список команд:
            </div>

        </div>

    </div>

</div>
<script type="text/javascript">
    $(function() {
        $("#sortable").sortable({
            revert: true,
            stop: function(event, ui) {
                if(!ui.item.data('tag') && !ui.item.data('handle')) {
                    ui.item.data('tag', true);
                    ui.item.fadeTo(400, 1);
                }
            },
            out: function (event, ui) {
                var self = ui;
                ui.helper.off('mouseup').on('mouseup', function () {
                    $(this).remove();
                    self.draggable.remove();
                });
            }
        });
        $(".my-draggable").draggable({
            connectToSortable: '#sortable',
            helper: 'clone',
            revert: 'invalid'
        });
        $("ul, li").disableSelection();

        $(".play").on('click',function(){
            $('#sortable>.commands').each(function(){
                var com=$(this).data("command");
                if(com=='up'){
                    $('#turtle').pen('null');
                    console.log("1");
                    $('#turtle').delay( 100000 );
                }
                if(com=='down'){
                    $('#turtle').pen('blue');
                    console.log("/2");
                }
                if(com=='rotate'){
                    $('#turtle').rt($(this).context.firstElementChild.valueAsNumber);
                    console.log("3");
                }
                if(com=='move'){
                    $('#turtle').fd($(this).context.firstElementChild.valueAsNumber);
                    console.log("4");
                }
                if(com=='repeat'){

                }
            })
        });

        $(".pause").on('click',function(){

        });

        $(".stop").on('click',function(){
            cg();
            home();
            $('#sortable>.commands').remove();
            });

    });
</script>

<script type="text/javascript">
eval($.turtle());
    $('#turtle').pen('red lineWidth 5 lineCap square').rt(90).fd(100).rt(90).fd(100);
</script>
</body>
<script src="js/bootstrap.js"></script>
</html>